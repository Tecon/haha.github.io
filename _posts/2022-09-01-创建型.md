---
title:  "创建型模式"
author:
  name: liuhe
  link: https://tecon.github.io
date:  2022-09-01 09:46:49 +0800
categories: [work, 利其器]
tags: [design pattern]
toc: false
---


#### 工厂方法模式&抽象工厂模式

​		指由工厂来创建对象，客户端仅关心传入参数。两者类似，只是抽象工厂模式抽象程度更高，可以定义不同的接口来实现不同工厂的生产接口，而工厂模式中接口只能定义自己工厂的生产接口，工厂需要生产不一样的产品时就不行了。在实际运用中，二者往往结合使用，利用抽象工厂模式的抽象程度最高来定义最顶层的抽象工厂接口，再往下是不同类别的abstract工厂，最后就是工厂模式来实现最终需要的的工厂类。

![image-20220815114502981](/2022/09/upgit_20220901_1661996643.png)

#### 单例模式

​		指一个类只有一个实例对象，对外提供一个静态公有方法获取实例。单例分为懒汉式和饿汉式。懒汉式在类加载时实例化对象。通过java类加载机制的同步来保证仅实例一个对象。缺点是增加了启动耗时，提前占用了内存。饿汉式在第一次使用类时实例化对象，需要通过DCL来保证一次性正确的实例化对象（需要用到volatile修饰对象引用，利用volatile的**可见性**和**禁止指令重排序**的特性避免new单例对象时造成引用逃逸），缺点是实现稍微复杂点。还有一种方式是使用静态内部类创建单例对象，但是最大的问题是这种方式无法传递参数。以上三种方式通过反射修改实例化对象方法(构造方法)的可见性可破坏该单例。所以可以通过枚举类来创建单例（枚举类无法通过反射创建对象）避免被破坏单例（一般情况下不至于，除非系统出现重大漏洞）。

#### 建造者模式

​		通过解耦复杂对象的构造和展示达到相同的构造过程生产不同的对象的目的。builder本身并不参与实际的参数初始化过程，而由具体的builder完成。适用于只需要构造几种特定性质的对象，且对象具有较多属性不便于通过构造函数完成初始化过程。

![image-20220815125227695](/2022/09/upgit_20220901_1661996647.png)

#### 原型模式

​		适用于需要消耗大量的存储或比较耗时的对象创建过程；或者用于简化创建多个相同对象或者创建具有大多相同属性的对象。（创建对象时传入同类型的对象，并通过clone接口实现对象赋值，以简化创建对象的过程）

